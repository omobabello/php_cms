var app=new Vue({el:"#app",data:{message:"",address:"",country:"",email:"",phone:"",hours:"",website:"",a_title:"",article:"",progress:0,b_message:"",b_class:"",hasBanner:!1,banner:""},methods:{changeFile(t,e){"banner"==e&&(this.banner=t.target.files[0]),"service"==e&&(this.service_image=t.target.files[0])},valid_file:(t,e)=>!!t&&t.size/1024/1024<=e,changeBanner(){this.hasBanner=!1},uploadBanner(){if(this.valid_file(this.banner,10)){this.b_message="";const t={onUploadProgress:function(t){app.progress=Math.round(t.loaded/t.total*100)}};let e=this.toFormData({image:this.banner});axios.post("http://localhost/gym_cms/index.php/UploadBanner/contact",e,t).then(t=>{t.data.status?(this.progress=0,this.banner=t.data.file,this.hasBanner=!0):(this.b_message=t.data.message,this.b_class="alert alert-danger")}).catch(t=>{console.log(t.response)})}else this.b_class="alert alert-danger",this.b_message="Select an image file not more than 10MB"},saveContact(){let t=!0;if(this.allFieldsFilled()||(this.message="Please fill all fields",t&=!1),/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(this.email)||(this.message="Email is invalid",t&=!1),t){let t=this.toFormData({address:this.address,country:this.country,email:this.email,phone:this.phone,hours:this.hours,website:this.website,article:this.article,title:this.a_title});axios.post("http://localhost/gym_cms/index.php/AddContact",t).then(t=>{t.data.status?swal("Contact Saved Successfully"):this.message="Operation Failed :("})}},getContact(){axios.post("http://localhost/gym_cms/index.php/GetBanners").then(t=>{banner=t.data.filter(t=>"contact"==t.page),banner.length>0&&(this.hasBanner=!0,this.banner=banner[0].link)}),axios.post("http://localhost/gym_cms/index.php/GetContact").then(t=>{this.a_title=t.data.title,this.article=t.data.article,this.country=t.data.country,this.email=t.data.email,this.website=t.data.website,this.phone=t.data.phone,this.address=t.data.address,this.hours=t.data.hours})},allFieldsFilled(){return this.address&&this.country&&this.phone&&this.hours&&this.website&&this.a_title&&this.article},toFormData(t){let e=new FormData;for(key in t)e.append(key,t[key]);return e}},mounted(){this.getContact()}});