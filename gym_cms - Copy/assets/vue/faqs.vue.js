function editFaq(e){app.editFaq(e)}function deleteFaq(e){app.deleteFaq(e)}var app=new Vue({el:"#app",data:{saveUrl:"http://localhost/gym_cms/index.php/AddFaq",message:"",newFaq:!1,title:"",article:"",banner:"",hasBanner:!1,b_message:"",b_class:"",progress:0},methods:{showNewFaq(){this.newFaq=!0},changeFile(e,t){"banner"==t&&(this.banner=e.target.files[0]),"service"==t&&(this.service_image=e.target.files[0])},valid_file:(e,t)=>!!e&&e.size/1024/1024<=t,changeBanner(){this.hasBanner=!1},uploadBanner(){if(this.valid_file(this.banner,10)){this.b_message="";const e={onUploadProgress:function(e){app.progress=Math.round(e.loaded/e.total*100)}};let t=this.toFormData({image:this.banner});axios.post("http://localhost/gym_cms/index.php/UploadBanner/faq",t,e).then(e=>{e.data.status?(this.progress=0,this.banner=e.data.file,this.hasBanner=!0):(this.b_message=e.data.message,this.b_class="alert alert-danger")}).catch(e=>{console.log(e.response)})}else this.b_class="alert alert-danger",this.b_message="Select an image file not more than 10MB"},editFaq(e){this.newFaq=!0,this.saveUrl=`http://localhost/gym_cms/index.php/EditFaq/${e}`,axios.post(`http://localhost/gym_cms/index.php/GetFaq/${e}`).then(e=>{this.title=e.data.title,this.article=e.data.article})},closeNewFaq(){this.newFaq=!1,this.message="",this.saveUrl="http://localhost/gym_cms/index.php/AddFaq"},getFaqs(){$("#table").DataTable({serverSide:!0,ajax:{url:"http://localhost/gym_cms/index.php/GetFaqs",type:"post",error:function(e){console.log(e.responseText)}}}),axios.post("http://localhost/gym_cms/index.php/GetBanners").then(e=>{banner=e.data.filter(e=>"faq"==e.page),banner.length>0&&(this.hasBanner=!0,this.banner=banner[0].link)})},saveFaq(){let e="",t=!0;this.title||(e+="Enter a title <br/>",t&=!1),this.article||(e+="Enter a article <br/>",t&=!1);let a=this.toFormData({title:this.title,article:this.article});t?axios.post(this.saveUrl,a).then(e=>{e.data.status?($("#table").DataTable().ajax.reload(),this.closeNewFaq(),this.article="",this.title=""):this.message="Operation Failed. :("}).catch(e=>{console.log(e)}):this.message=e},deleteFaq(e){swal({title:"Delete?",text:"Are you sure you want to delete this FAQ ?",closeOnClickOutside:!1,buttons:{cancel:{className:"btn btn-default",text:"Cancel",visible:!0},confirm:{className:"btn btn-danger",text:"Yes, Delete",visible:!0,value:"delete"}}}).then(t=>{"delete"==t&&axios.post("http://localhost/gym_cms/index.php/DeleteFaq",this.toFormData({serial:e})).then(e=>{$("#table").DataTable().ajax.reload()})})},toFormData(e){let t=new FormData;for(key in e)t.append(key,e[key]);return t}},mounted(){this.getFaqs()}});